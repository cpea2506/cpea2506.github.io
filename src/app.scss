@tailwind base;
@tailwind utilities;
@tailwind components;

html {
    @apply overflow-x-hidden scroll-smooth bg-black text-white;
}

code {
    @apply bg-black-200 rounded-sm p-1;
}

h1 {
    @apply text-2xl font-bold;
}

a {
    @apply text-gray no-underline;

    &:hover {
        @apply text-white;
    }
}

nav {
    @apply bg-black-300/[.85] flex-items-center justify-between text-white;
}

/* shiki */
pre {
    &.shiki {
        @apply px-0;

        background-color: #282c34 !important;

        &::before {
            @apply sticky;
        }

        & > div.code-title {
            @apply absolute -mt-10 ml-20 pl-1.5 pt-1.5 opacity-50;
        }

        & .language-id {
            @apply hidden;
        }

        & > .code-container {
            @apply overflow-auto;

            /* custom scrollbar */
            &::-webkit-scrollbar {
                @apply w-5;
            }

            &::-webkit-scrollbar-track {
                @apply bg-transparent;
            }

            &::-webkit-scrollbar-thumb {
                @apply rounded-[20px] border-[4px] border-solid border-transparent bg-gray-100 bg-clip-content;
            }

            &::-webkit-scrollbar-thumb:hover {
                @apply bg-gray;
            }
        }

        &:not([text="true"], [svelte="true"])
            > .code-container
            > code
            > div.line
            > span:first-child {
            @apply pl-5;
        }

        &:not([text="true"], [svelte="true"])
            > .code-container
            > code
            > div.line
            > span:last-child {
            @apply pr-5;
        }

        & div.dim {
            @apply opacity-50 transition-opacity;
        }

        &:hover div.dim {
            @apply opacity-100;
        }

        & div.highlight::before {
            @apply bg-yellow/20 absolute h-6 w-full content-[''];
        }
    }

    &.twoslash {
        & data-lsp {
            @apply border-b border-dashed border-transparent transition-all;

            &:hover::before {
                @apply absolute z-50 translate-y-5 whitespace-pre-wrap rounded bg-neutral-50 px-2 py-1 font-mono text-neutral-50 transition-all content-[attr(lsp)];
            }
        }

        &:hover data-lsp {
            @apply border-neutral-50/30;
        }
    }
}

:is(pre.shiki[text="true"], pre.shiki[svelte="true"]) > div.code-container {
    @apply mx-5;
}

/* prose */
.prose {
    & :where(code):not(:where([class~="not-prose"] *)) {
        &::before,
        &::after {
            @apply content-none;
        }
    }

    & :where(a):not(:where([class~="not-prose"] *)) {
        @apply no-underline;

        &:hover {
            @apply text-blue underline;
        }
    }
}

@layer components {
    .post-card-border {
        @apply border-blue border-b border-solid;
    }
}

@layer utilities {
    .flex-center {
        @apply flex items-center justify-center;
    }

    .flex-col-center {
        @apply flex flex-col items-center justify-center;
    }

    .flex-items-center {
        @apply flex items-center;
    }

    .flex-justify-center {
        @apply flex justify-center;
    }

    .h-screen-content {
        min-height: calc(100vh - 3.75rem); // minus size of header
    }
}
